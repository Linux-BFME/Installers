name: LotrBfmeII
game_slug: LotrBfmeII_GameSlug
version: Installer
slug: installeridentifier
runner: wine

script:
    files:
    - patch103zip: https://web.archive.org/web/20201019192222if_/https://sjc5.dl.dbolical.com/dl/2020/10/19/Patch103Files.zip?st=Gw761QiwEAujeErrjehb0A==&e=1603138942
    - patch105zip: https://web.archive.org/web/20160404150922if_/http://www.the3rdage.net/files/3683/patch105.zip
    - patch106zip: https://web.archive.org/web/20150428105152if_/http://online.the3rdage.net/downloads/patch/patch106bundleZoom.zip
    game:
        arch: win64
        exe: $GAMEDIR/drive_c/Program Files (x86)/EA GAMES/The Battle for Middle-earth (tm)/lotrbfme.exe
        working_dir: $GAMEDIR/drive_c/Program Files (x86)/EA GAMES/The Battle for Middle-earth (tm)
        prefix: $GAMEDIR
    installer:
    - task:
        arch: win64
        name: create_prefix
        prefix: $GAMEDIR
    - insert-disc:
        requires: AutoRun.exe
    - task:
        description: Running game installer (Select "Quit" after the installation has
          finished)
        executable: $DISC/AutoRun.exe
        name: wineexec
        prefix: $GAMEDIR
    - extract:
        description: Installing patch 1.03
        file: patch103zip
        format: zip
        dst: $GAMEDIR/drive_c/Program Files (x86)/EA GAMES/The Battle for Middle-earth (tm)
    - extract:
        description: Installing patch 1.05
        file: patch105zip
        format: zip
        dst: $GAMEDIR/drive_c/Program Files (x86)/EA GAMES/The Battle for Middle-earth (tm)
    - extract:
        description: Installing patch 1.06
        file: patch106zip
        format: zip
        dst: $GAMEDIR/drive_c/Program Files (x86)/EA GAMES/The Battle for Middle-earth (tm)
    - write_file:
        file: $GAMEDIR/drive_c/users/$USER/Application Data/My Battle for Middle-earth Files/Options.ini
        content: |
            AllHealthBars = yes
            AlternateMouseSetup = no
            AmbientVolume = 70
            AudioLOD = High
            Brightness = 50
            FixedStaticGameLOD = Medium
            FlashTutorial = 0
            HasGotOnline = yes
            HasSeenLogoMovies = yes
            HeatEffects = yes
            IdealStaticGameLOD = UltraHigh
            IsThreadedLoad = yes
            MovieVolume = 80
            MusicVolume = 60
            Resolution = $RESOLUTION_WIDTH $RESOLUTION_HEIGHT
            SFXVolume = 100
            ScrollFactor = 50
            StaticGameLOD = Medium
            TimesInGame = 16
            UnitDecals = yes
            UseEAX3 = no
            VoiceVolume = 80
    system: {}
    wine:
        dxvk: false
        esync: true
